<% if users.empty? %>
  <%= govuk_inset_text(text: t("project.table.by_user.empty")) %>
<% else %>
  <table class="govuk-table" name="projects_table" aria-label="Projects table">
    <caption class="govuk-table__caption govuk-!-display-none"><%= t("project.table.by_user.caption") %></caption>
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header" scope="col"><%= t("project.table.headers.user") %></th>
        <th class="govuk-table__header" scope="col"><%= t("project.table.headers.email") %></th>
        <th class="govuk-table__header" scope="col"><%= t("project.table.headers.team") %></th>
        <th class="govuk-table__header" scope="col"><%= t("project.table.headers.conversion_count") %></th>
        <th class="govuk-table__header" scope="col"><%= t("project.table.headers.transfer_count") %></th>
        <th class="govuk-table__header" scope="col"><%= t("project.table.headers.view_projects") %></th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
    <% users.each do |user| %>
      <tr class="govuk-table__row">
        <td class="govuk-table__header govuk-table__cell"><%= user.name %></td>
        <td class="govuk-table__cell"><%= user.email %></td>
        <td class="govuk-table__cell"><%= user.team.nil? ? "No team" : t("user.teams.#{user.team}") %></td>
        <td class="govuk-table__cell"><%= user.conversion_count %></td>
        <td class="govuk-table__cell"><%= user.transfer_count %></td>
        <td class="govuk-table__cell">
          <%= link_to t("project.table.body.view_projects_for_html", entity: user.name), by_user_all_users_projects_path(user.id) %>
        </td>
    <% end %>
    </tbody>
  </table>
<% end %>

<%= govuk_pagination(pagy: pager) %>
