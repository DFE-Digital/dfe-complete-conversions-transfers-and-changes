<%= render(TaskList::TaskHeaderComponent.new(project: @project, task: @task)) %>

<% content_for :pre_content_nav do %>
  <% render partial: "conversions/tasks/shared/back_link", locals: {project_id: @project.id} %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <% if @project.external_contacts.count > 0 %>
      <%= form_for @task, url: project_edit_task_path(@project, @task.identifier), method: :put do |form| %>
        <%= form.govuk_error_summary %>

        <%= form.govuk_collection_radio_buttons :contact_id,
              @tasks_data.project.external_contacts,
              :id,
              :name,
              :title,
              legend: {text: t("conversion.task.funding_agreement_contact.choose_a_contact.title"), size: "l"},
              form_group: {id: "funding-agreement-contact-choose-a-contact"} %>

        <%= form.govuk_submit t("task_list.continue_button.text") if policy(@tasks_data).update? %>
      <% end %>
    <% else %>
      <h2 class="govuk-heading-l"><%= t("conversion.task.funding_agreement_contact.no_contacts.title") %></h2>
      <%= t("conversion.task.funding_agreement_contact.no_contacts.add_contacts_guidance_html", add_contact_link: project_contacts_path(@project)) %>
      <%= govuk_button_link_to t("task_list.continue_button.text"), project_conversion_tasks_path(@project) %>
    <% end %>
  </div>

  <div class="govuk-grid-column-one-third">
    <%= render partial: "conversions/shared/task_notes" %>
  </div>
</div>
