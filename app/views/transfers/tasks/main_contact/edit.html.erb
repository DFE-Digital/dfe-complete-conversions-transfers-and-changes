<%= render(TaskList::TaskHeaderComponent.new(project: @project, task: @task)) %>

<% content_for :pre_content_nav do %>
  <% render partial: "transfers/tasks/shared/back_link", locals: {project_id: @project.id} %>
<% end %>

<% content_for :page_title do %>
  <%= page_title(t("transfer.task.main_contact.title")) %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <% if @project.contacts.count > 0 %>
      <%= form_for @task, url: project_edit_task_path(@project, @task.identifier), method: :put do |form| %>
        <%= form.govuk_error_summary %>

        <%= form.govuk_collection_radio_buttons :main_contact_id,
              @project.contacts,
              :id,
              :name,
              :title,
              legend: {text: t("transfer.task.main_contact.choose_a_contact.title"), size: "l"},
              form_group: {id: "main-contact-choose-a-contact"} %>

        <%= form.govuk_submit t("task_list.continue_button.text") if policy(@tasks_data).update? %>
      <% end %>
    <% else %>
      <h2 class="govuk-heading-l"><%= t("transfer.task.main_contact.no_contacts.title") %></h2>
      <%= t("transfer.task.main_contact.no_contacts.add_contacts_guidance_html", add_contact_link: project_contacts_path(@project)) %>
      <%= govuk_button_link_to t("task_list.continue_button.text"), project_tasks_path(@project) %>
    <% end %>
  </div>

  <div class="govuk-grid-column-one-third">
    <%= render partial: "shared/tasks/task_notes" %>
  </div>
</div>
